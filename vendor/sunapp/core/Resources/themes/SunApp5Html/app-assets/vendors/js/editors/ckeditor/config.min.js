function removeDomain(e){var t=document.querySelector('meta[name="base-url"]');return t&&e.indexOf(t.content)>-1?e.replace(t.content,""):e}CKEDITOR.editorConfig=function(e){e.allowedContent=!0,e.removePlugins="save"},CKEDITOR.on("instanceReady",function(e){e.editor.on("beforeCommandExec",function(e){"paste"===e.data.name?e.editor._.forcePasteDialog=!0:"pastetext"===e.data.name&&"keystrokeHandler"===e.data.commandData.from&&e.cancel()})}),CKEDITOR.on("dialogDefinition",function(e){var t=e.data.name,n=e.data.definition,a=e.data.definition.dialog,o=e.editor;"image"===t&&(n.onOk=function(e){var t=e.sender.originalElement.$.src,n=a.getContentElement("info","txtAlt"),d=n.getValue(),i=a.getContentElement("info","txtWidth").getValue()||$element.width,l=a.getContentElement("info","txtHeight").getValue()||$element.height;"undefined"===d&&n.setValue("");var m=CKEDITOR.dom.element.createFromHtml('<img src="'+removeDomain(t)+'" alt="'+d+'" width="'+i+'" height="'+l+'" />');o.insertElement(m)})}),CKEDITOR.dtd.a.div=1,CKEDITOR.dtd.a.p=1,CKEDITOR.dtd.a.h1=1,CKEDITOR.dtd.a.h2=1,CKEDITOR.dtd.a.h3=1,CKEDITOR.dtd.a.h4=1,CKEDITOR.dtd.a.ul=1,CKEDITOR.dtd.a.ol=1;
